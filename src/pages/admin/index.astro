---
import Layout from '../../layouts/Layout.astro';
import Auth from '../../components/Auth';
import { createSupabaseServerClient } from '../../lib/supabaseServer';

const supabase = createSupabaseServerClient(Astro.cookies);
const session = await supabase.auth.getSession();
const isAuthenticated = !!session.data.session;

if (isAuthenticated) {
  return Astro.redirect('/admin/dashboard');
}
---

<Layout title="Autentificare - Ghilda Călătorilor">
  <div class="max-w-4xl mx-auto">
    <Auth client:load />
  </div>
</Layout>